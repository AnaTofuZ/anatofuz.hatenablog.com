---
Title: æœ€è¿‘ä½¿ã£ã¦ã„ã‚‹OSS/è‡ªä½œCLIãƒ„ãƒ¼ãƒ«ã¨ã‹
Category:
- ã‚·ã‚§ãƒ«
Date: 2019-12-10T19:59:22+09:00
URL: https://anatofuz.hatenablog.com/entry/2019/12/10/195922
EditURL: https://blog.hatena.ne.jp/anatofuz/anatofuz.hatenablog.com/atom/entry/26006613479712555
---

ã“ã‚“ã«ã¡ã¯ã€‚ ç‰å¤§ã‚¢ãƒ‰ãƒ™ãƒ³ãƒˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚’ã‚¨ã‚¤ãƒƒã¨ã‚„ã‚‹ä¿‚ã®id:anatofuz:detailã§ã™ã€‚
ã“ã‚Œã¯[ç‰å¤§ Advent Calendar 2019](https://adventar.org/calendars/4060) 10æ—¥ç›®ã®è¨˜äº‹ã§ã™ã€‚


æ˜¨æ—¥ã¯id:onigirichanre:detailã•ã‚“ã®é€†æ±‚äººã®è©±ã§ã—ãŸã€‚
[https://onigirichanre.hateblo.jp/entry/2019/12/09/205811:embed:cite]

è‰¯ã„ã§ã™ã­é€†æ±‚äººã€‚åƒ•ã‚‚è¡Œã£ãŸã“ã¨ã¯ã‚ã‚Šã¾ã™ãŒã€éƒ½ä¼šã§ã‚„ã£ã¦ã„ã‚‹é€†æ±‚äººã®å ´åˆã‚ã‹ã‚‰ã•ã¾ã«è‡ªåˆ†ã«èˆˆå‘³ã‚’æŒã£ã¦ã„ã‚‹ä¼æ¥­(äººé–“)ã¨ã€ãã†ã§ãªã„ä¼æ¥­ãŒç›®ã«è¦‹ãˆã¦ã‚ã‹ã‚‹ã®ã§é¢ç™½ã„ã§ã™ã­ã€‚
~~ã¡ãªã¿ã«æŸã‚µã‚¤ãƒãƒ¼ãªã‚“ã¨ã‹ã¨ã®é¢æ¥ä½“é¨“ã¯æœ€æ‚ªã ã£ãŸã®ã‚’è¦šãˆã¦ã„ã¾ã™ã€‚~~

## ã“ã®ã‚¨ãƒ³ãƒˆãƒª

æœ€åˆã¯è‡ªåˆ†ã®ãƒ‡ã‚¹ã‚¯å‘¨ã‚Šã®è©±ã‚’ã—ã‚ˆã†ã¨æ€ã£ã¦ã„ã¾ã—ãŸãŒã€ [NiZã®ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰](https://www.nizkeyboard.com/)ã¨[FILCOã®ã‚¦ãƒƒãƒ‰ãƒ‘ãƒ¼ãƒ ãƒ¬ã‚¹ãƒˆ](https://www.diatec.co.jp/products/det.php?prod_c=1340)ã¯è‰¯ã„ãã¨ã„ã†è©±ã—ã‹ã—ãªã„ã¨æ€ã£ãŸã®ã§ã€å¤‰æ›´ã—ã¦ä¾¿åˆ©ã‚³ãƒãƒ³ãƒ‰/æœ€è¿‘ã®è‡ªä½œã‚¹ã‚¯ãƒªãƒ—ãƒˆã®è©±ã§ã™ã€‚

ã‚ã¨[ã‚µãƒ³ãƒ† ãƒ¡ãƒ‡ã‚£ã‚«ãƒ«12ã®ç›®è–¬](https://www.santen.co.jp/ja/healthcare/eye/products/otc/sante_medical_10.jsp)ãªã©ã¯å¿…ãšæŒã£ã¦ãŠãã¨ä¾¿åˆ©ã€‚

## `pbcopy` 

ã¾ãšã¯è‡ªä½œã‚³ãƒãƒ³ãƒ‰ã§ãªãmac osã«æ¨™æº–ã§å…¥ã£ã¦ã„ã‚‹ã‚³ãƒãƒ³ãƒ‰ã‹ã‚‰è¦‹ã¦ã„ãã¾ã—ã‚‡ã†ã€‚
å€‹äººçš„ã«é »ç¹ã«ä½¿ã†ã®ã¯ã€ ã“ã®`pbcopy`ã§ã™ã€‚ æ©Ÿèƒ½ã¯å˜ç´”ã§ã€ã‚·ãƒ¥ãƒƒã¨æ¨™æº–å…¥åŠ›ã‚’pbcopyã«ã‚ãŸã™ã¨ã€ãã‚ŒãŒã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã•ã‚Œã‚‹ã‚‚ã®ã§ã™ã€‚

ã‚¤ãƒ‡ã‚£ã‚ªãƒ çš„ã«ã‚ˆãä½¿ã†ã®ã¯ãƒ‘ã‚¤ãƒ—ã§ã¤ãªã’ã‚‹æ–¹æ³•ã§ã—ã‚‡ã†ã‹ã€‚
ä¾‹ãˆã°

```sh
$echo 'hoge' | pbcopy
```

ã¨ã™ã‚‹ã¨ `hoge` ã¯ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã•ã‚Œã¾ã™ã€‚

## `ojichat` 

> ãŠã˜ã•ã‚“ãŒLINEã‚„ãƒ¡ãƒ¼ãƒ«ã§é€ã£ã¦ããã†ãªæ–‡ã‚’ç”Ÿæˆã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã€‚
ã‚‰ã—ãä¸€éƒ¨ã®ç•Œéšˆã§éå¸¸ã«äººæ°—ã®ã‚ã‚‹ã‚³ãƒãƒ³ãƒ‰ã§ã™ã€‚

[https://github.com/greymd/ojichat:embed:cite]

```sh
$ ojichat
ã®ã‚Šã‹ï¾ï½¬ï¾ã¯ã€ã‚¹ã‚¿ã‚¤ãƒ«ãŒã„ã„ã­ğŸ˜š(^o^)ğŸ˜ƒãƒ›ãƒ³ãƒˆå¯æ„›ã™ãã ã‚ˆã€œğŸ˜˜ãƒãƒƒã‚¿ã‚¯ãƒ¢ã‚¦(^o^)ğŸ˜ƒâ˜€ ğŸ˜˜(^_^)
$ ojichat jogo
åƒ•ã¯jogoãƒãƒ£ãƒ³ä¸€ç­‹ã ã‚ˆğŸ˜´ğŸ¤‘(^^;;åƒ•ã¯jogoãƒãƒ£ãƒ³ã®å‘³æ–¹ã ã‹ãƒ©ãƒğŸ˜ƒ
```

åƒ•ã¯ã‚ˆãTwitterã§id:unimarimo:detailã«ã‚¯ã‚½ãƒªãƒ—ã‚’é£›ã°ã™éš›ã«åˆ©ç”¨ã—ã¦ã„ã¾ã™ãŒã€å‰è¿°ã®ã€€`pbcopy` ã¨çµ„ã¿åˆã‚ã›ã‚‹ã¨åŠ¹æœã‚’ç™ºæ®ã—ã¾ã™ã€‚

```sh
$ojichat | pbcopy
```

ã“ã†ã™ã‚‹ã¨ã€ ojichatã®å‡ºåŠ›ãŒã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã•ã‚Œã¾ã™ãŒã€æ¨™æº–å…¥åŠ›ã‚’ã™ã¹ã¦pbcopyã«ãƒ‘ã‚¤ãƒ—ã§æ¸¡ã—ã¦ã„ã‚‹ç‚ºã€ å®Ÿéš›ã«ãƒšãƒ¼ã‚¹ãƒˆã—ã¦ã¿ãªã„ã¨ä½•ãŒå…¥ã£ã¦ã„ã‚‹ã‹ã‚ã‹ã‚Šã¾ã›ã‚“ã€‚
ã“ã†ãªã‚‹ã®ãŒè¾›ã„ã®ã§ã€ zshrcã«ã‚·ãƒ¥ãƒƒã¨æ›¸ã„ãŸé–¢æ•°ãŒ `ojicopy` ã§ã™ã€‚

```sh
function ojicopy {
  local ojimsg=$(ojichat $@)
  echo $ojimsg
  echo $ojimsg | pbcopy
}
```

ä½¿ç”¨æ–¹æ³•ã¯ `ojichat` ã‚’ `ojicopy` ã«å·®ã—æ›¿ãˆã‚‹ã ã‘ã§ã™ã€‚

```sh
$ ojicopy jogo
jogoãƒãƒ£ãƒ³ï¼ˆç¬‘ï¼‰å…ƒæ°—ã€ãªã„ã®ã‹ãªã(-_-;)å¤§ä¸ˆå¤«ï¼ˆï¿£ãƒ¼ï¿£?ï¼‰å¯’ã„ã‘ã©ã€é ‘å¼µã£ã¦ã­ğŸ˜(ï¼ƒï¿£Ğ—ï¿£)âœ‹ğŸ˜¤
```

ã“ã†ã™ã‚‹ã¨å‡ºåŠ›è‡ªä½“ã¯ `ojichat` ã‚’å˜ä½“æ‰“ã¡ã—ãŸã®ã¨ç­‰ä¾¡ã§ã™ãŒã€æã‚‹ã¹ãã“ã¨ã«ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚‚ã‚³ãƒ”ãƒ¼ã•ã‚Œã¾ã™ã€‚
åŸç†ã¯ã‚·ã‚§ãƒ«ãŒèª­ã‚ã‚‹æ–¹ãªã‚‰ã ã„ãŸã„åˆ†ã‹ã‚‹ã‹ã¨æ€ã„ã¾ã™ãŒ, `ojicopy` ã®å¼•æ•°ã‚’`ojichat` ã«æ¸¡ã—ã€ãã®å‡ºåŠ›ã‚’å¤‰æ•°`ojimsg`ã«ä»£å…¥ã—ã¾ã™ã€‚
ã‚ã¨ã¯ãŸã  `echo` ã¨ `pbcopy` ã‚’å®Ÿè¡Œã—ã¦ã„ã‚‹ã ã‘ã§ã™ã€‚

## pt

the_platinum_searcherã®ã“ã¨

[https://github.com/monochromegane/the_platinum_searcher:cite]


golangã§æ›¸ã‹ã‚ŒãŸç´ æ—©ã„grepã€‚æœ€è¿‘ã¯ripgrepã‚‚ã„ã„ã‚‰ã—ã„ãŒã€ptã®æ–¹ã‚’ä½¿ã£ã¦ã„ã‚‹

## fd
 
Rustã§æ›¸ã‹ã‚ŒãŸfinderã€‚ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒfinderã¨é•ã†ã®ã§è‰¯ãå¿˜ã‚Œã‚‹

[https://github.com/sharkdp/fd:embed:cite]


## ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªç§»å‹•ç³»

cdã—ãŸã‚‰zshã®`chpwd_functions`ã§ `save_dir_history`ãŒå®Ÿè¡Œã•ã‚Œã€ãƒ›ãƒ¼ãƒ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä»¥ä¸‹ã«æ¢ç´¢ã—ãŸãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒè¿½è¨˜ã•ã‚Œç¶šã‘ã‚‹ç”¨ã«ãªã£ã¦ã„ã‚‹

```
export dirfile="$HOME/.dirfile"


function save_dir_history {
    echo $PWD >>| $dirfile
} 
  
chpwd_functions+=save_dir_history
```

## hd

ğŸ‘†ã§ä½œæˆã—ãŸ `dirfile`ã®æœ«å°¾ã¯æœ€å¾Œã« `cd` ã—ãŸãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ã™ã€‚
æ™®æ®µã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã®ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’ãƒãƒ³ãƒãƒ³é–‹ãé‹ç”¨ã‚’ã—ã¦ã„ã‚‹ã®ã§ã€åˆ¥ã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§æœ€å¾Œã«cdã—ãŸãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¨ã€åˆ¥ã®windowsã®ã‚·ã‚§ãƒ«ã®ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’åŒæœŸã—ãŸã„ã€‚
ãã®ç‚ºã«ã¯ `dirfile`ã®æœ«å°¾ã«cdã™ã‚Œã°ã„ã„ã®ã§ã€ãã†ã„ã†é‹ç”¨ã§ã‚³ãƒãƒ³ãƒ‰ã‚’æ›¸ã„ã¦ã„ã¾ã™ã€‚
ãªãŠä»–ã®é–¢æ•°ã§`dirfile` ã‚’å‚ç…§ã™ã‚‹ã«ã¯ç’°å¢ƒå¤‰æ•°ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã€ `export` ã—ã¦ã„ã¾ã™ã€‚

```
function hd {
    cd $(cat $dirfile | tail -1)
}
```

ã“ã†æ›¸ã„ã¦ãŠãã¨ã€âŒ˜Nã§ã‚ãŸã—ã„ã‚¿ãƒ¼ãƒŸãƒŠãƒ«windowã‚’é–‹ã„ãŸã‚‰ã€ã¨ã‚Šã‚ãˆãš `hd` ã£ã¦æŠ¼ã—ã¦ãŠãã¨ä¾¿åˆ©

## peco

ã”å­˜çŸ¥ãƒ‘ã‚¤ãƒ—ã§ç¹‹ã„ã ã‚‚ã®ã‚’ã„ã„æ„Ÿã˜ã«ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ã‚¿ãƒ«ã‚µãƒ¼ãƒã—ã¦ãã‚Œã‚‹ãã‚“


## peco-z-search

ã‚‚ã¨ã‚‚ã¨ã¯ã“ã¡ã‚‰ã®ã‚¨ãƒ³ãƒˆãƒªã‚’å‚è€ƒã«ã—ã¦æ›¸ã„ã¦ã„ãŸã‚‚ã®ã§ã™


[https://qiita.com/maxmellon/items/23325c22581e9187639e:embed:cite]

ã“ã®ã‚¨ãƒ³ãƒˆãƒªã§ã¯zshã®zã¨ã„ã†ãƒ„ãƒ¼ãƒ«ã®æ©Ÿèƒ½ã‚’ä½¿ã„ã€ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ã‚¿ãƒ«ã‚µãƒ¼ãƒã‚’å®Ÿç¾ã—ã¦ã„ã¾ã™ã€‚
ã—ã‹ã—åƒ•ã¯ã™ã§ã« `dirfile`ã«ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä¸€è¦§ãŒå…¥ã£ã¦ã„ã‚‹ã®ã§ã€ã“ã‚Œã‚’ `cat` ã—Perlãƒ¯ãƒ³ãƒ©ã‚¤ãƒŠãƒ¼ã«æ¸¡ã—ã¦ã„ã¾ã™ã€‚
Perlãƒ¯ãƒ³ãƒ©ã‚¤ãƒŠãƒ¼ã§ã¯ã€ Perl ã®ã€€`if (-d $file_name)` ã‚’åˆ©ç”¨ã—ã€ ãƒ‡ãƒƒãƒ‰ãƒªãƒ³ã‚¯ã§ãªã„ã‚‚ã®ã‚’å‡ºåŠ›ã™ã‚‹æ§˜ã«ã—ã¦ã„ã¾ã™ã€‚
ã¾ãŸã€ id:anatofuz:detail ãŒã€gameã¨ã„ã†ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã„ã‹ãŒã‚ã—ã„ã‚¿ã‚¤ãƒˆãƒ«ã®ã‚²ãƒ¼ãƒ ã‚’å¤§é‡ã«ãŠã„ã¦ã„ã‚‹ã®ã§ã€å…¬è¡†ã®é¢å‰ã§ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦å¤§å¤‰ãªã“ã¨ã«ãªã‚‰ãªã„ã‚ˆã†ã€ `game` ãŒãƒ‘ã‚¹ã«å«ã¾ã‚Œã¦ã„ãŸã‚‰å‰Šé™¤ã—ã¦ã„ã¾ã™ã€‚

```zsh
#function peco-z-search# {{{
function peco-z-search
{   
    which peco z > /dev/null
    if [ $? -ne 0 ]; then
        echo "Please install peco and z"
        return (1)
    fi
    local res=$(cat $dirfile | perl -ne 'BEGIN{%dir;} chomp($_); $dir{$_}++; END{map { print "$_\n" if (-d $_) } grep { $_ !~ /game/ } keys %dir}' | peco)
    if [ -n "$res" ]; then
        BUFFER+="cd $res"
        zle accept-line
        else
            return 1
        fi
 }
zle -N peco-z-search
bindkey '^[pz' peco-z-search
# }}}
```

ã¡ãªã¿ã«ã“ã®Perlã‚¹ã‚¯ãƒªãƒ—ãƒˆã¨ç­‰ä¾¡ãªã‚‚ã®ã¯ã ã„ãŸã„ã“ã‚“ãªæ„Ÿã˜ã§ã—ãŸã€‚

`local res=$(cat $dirfile | sort -rn | uniq | peco)`

## heic2jpg

åƒ•ã¯ã‚ˆãiphoneã§å–ã£ãŸå†™çœŸã‚’air dropã§macã«é€ã£ã¦ã„ã¾ã™ãŒã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ’®å½±ã‚’ã—ã¦ã„ã‚‹ç‚ºã€æ‹¡å¼µå­ãŒHEICã§é€ã‚‰ã‚Œã¾ã™ã€‚
HEICã®ãƒ‡ãƒ¼ã‚¿ã¯å†™çœŸã¨ã—ã¦ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã§ããªã„ã®ã§ã€ jpegãªã©ã«å¤‰æ›ã—ãŸã„ã§ã™ã­ã€‚
å®Ÿã¯ã“ã®å¤‰æ›ã¯ mac osã§å‡ºæ¥ã‚‹ã®ã§ã™ãŒã€ã‚ˆãã‚³ãƒãƒ³ãƒ‰ã‚’å¿˜ã‚Œã‚‹ã®ã§é›‘ã«ã‚¹ã‚¯ãƒªãƒ—ãƒˆåŒ–ã—ã¦ã„ã¾ã™ã€‚


```zsh
#!/usr/local/bin/zsh
if [ $# -ne 1 ]; then
  echo 'require heic file'
  exit 1
fi
image_title=$1:r
sips --setProperty format jpeg ${image_title}.HEIC --out ${image_title}.jpg
```

ã“ã®`sips` ãŒã„ã„æ„Ÿã˜ã«ç”»åƒå¤‰æ›ã‚’ã—ã¦ãã‚Œã¦ãŠã‚Šã€ jpegã«å¤‰æ›ã—ã¾ã™ã€‚
`image_title=$1:r` ã®éƒ¨åˆ†ã§ã™ãŒ, zshã®æ©Ÿèƒ½ã§ `${str}:r` ã¨ã™ã‚‹ã¨ã€`${str}` ã®æ‹¡å¼µå­ã‚’å–ã‚Šé™¤ãã“ã¨ãŒå¯èƒ½ã¨ãªã‚Šã¾ã™ã€‚
ã“ã‚Œã‚’ã‚·ãƒ¥ãƒƒã¨å®Ÿè¡Œã™ã‚‹ã¨ã€å®Ÿè¡Œã—ãŸãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ã€HEICã®ãƒ•ã‚¡ã‚¤ãƒ«åã¨åŒã˜jpegãƒ•ã‚¡ã‚¤ãƒ«ãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚


## screenshot-type

mac osã§å–å¾—ã™ã‚‹ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã®ç¨®é¡ã‚’å¤‰æ›´ã—ã¦ãã‚Œã‚‹ã‚³ãƒãƒ³ãƒ‰
ä½•ãŒå¤‰æ›´ã§ãã‚‹ã‹è¦šãˆã‚‰ã‚Œãªã„ã®ã§ã€ tabã‚’å©ãã¨ã„ã„æ„Ÿã˜ã«ä¿ç®¡ã—ã¦ãã‚Œã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™

```
screenshot-type () {
	if [ $# -ne 1 ]
	then
		echo "require bmp,gif,jpg,pdf,png,tiff"
		return 1
	else
		defaults write com.apple.screencapture type $1
	fi
}
```

`screenshot-type j` ã§ã‚¿ãƒ–æŠ¼ã™ã¨ã€ã„ã„æ„Ÿã˜ã«jpgã«ä¿ç®¡ã—ã¦ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ãã‚Œã‚‹ã€‚
ã“ã‚Œã®è£œå®Œé–¢æ•°ã‚’ `$fpath` ãŒé€šã£ã¦ã„ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã« `_screenshot-type ` ã¨ã„ã†åå‰ã§ç™»éŒ²ã—ã¦ã„ã‚‹ã€‚

```zsh
#compdef screenshot-type
function _screenshot-type {
    _values 'type' 'jpg' 'png' 'pdf' 'bmp' 'gif' 'tiff'
}
```

`_values` ã¨æ›¸ã„ã¦ãŠãã¨ã€ã‚³ãƒãƒ³ãƒ‰ã®å¼•æ•°ã¨ã—ã¦è£œå®Œã•ã‚Œã‚‹ã€‚

## hg-browse

åƒ•ã‚‰ã®å¤§å­¦ã¨ç ”ç©¶å®¤ã§ã¯gitã®ä»–ã«mercurialã‚’åˆ©ç”¨ã—ã¦ã„ã‚‹ãŒã€ gitã§ã„ã†ã¨ã“ã‚ã®hubã‚³ãƒãƒ³ãƒ‰ã® `hub browse` ã¿ãŸã„ãªã®ãŒç„¡ã‹ã£ãŸã‹ã‚‰æ›¸ã„ãŸã‚¹ã‚¯ãƒªãƒ—ãƒˆã€‚
åŸºæœ¬è‡ªåˆ†ã®å¤§å­¦ã®ç’°å¢ƒã§å‡ºæ¥ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã‚‹ã€‚

```perl
#!/usr/bin/env perl
use strict;
use warnings;
use IPC::Run3;


# hg configçµŒç”±ã§hgrcã«ã‹ã‹ã‚Œã¦ã„ã‚‹pushå…ˆã‚’ç¢ºèªã™ã‚‹
my @cmd = ('hg','config','paths.default');
my ($stdout,$stderr);
eval { run3 \@cmd,undef,\$stdout,\$stderr;};

if ($@){
    print "error! >> $stderr";
    exit 1;
}

# ç„¡ã‹ã£ãŸã‚‰ç‰¹ã«ä½•ã‚‚ã—ãªã„
exit 1 unless ($stdout);

# yomitanã¯ãƒ‘ã‚¹ã§é–‹ã‘ãªã„ã®ã§åˆ¥æ 
if ($stdout =~ /yomitan/){
    yomitan($stdout);
} elsif ($stdout =~ /firefly/){
    firefly($stdout);
}

if ( $stdout =~ m[(https?|ssh)://(\w+@)?(.*)]){
    my $url = "http://$3";
    @cmd = ('open',$url);
    eval { run3 \@cmd,undef,\$stdout,\$stderr;};
    if ($@){
        print "error! >> $stderr";
        exit 1;
    }
}


sub yomitan {
    my $input  = shift;
    my $http_domain = 'https://ie.u-ryukyu.ac.jp/hg/';
    my $mid_path = 'index.cgi/home/hg/';
    my $url;

    if ($input =~ m[.*//home/hg/y(\d+)(.+)]){
        $url = $http_domain . "y$1/".$mid_path."y$1".$2;
    }
    @cmd = ('open',$url);
    eval { run3 \@cmd,undef,\$stdout,\$stderr;};
    exit 0;
}

sub firefly {
    my $input  = shift;
    my $http_domain = 'http://www.cr.ie.u-ryukyu.ac.jp/';
    my $url;
    if (($input =~ m[.*?firefly.cr.ie.u-ryukyu.ac.jp/(.*)] )||($input =~  m[.*firefly/(.*)])){
        $url = $http_domain.$1;
    }
    @cmd = ('open',$url);
    eval { run3 \@cmd,undef,\$stdout,\$stderr;};
    exit 0;
}
```

ä¾‹ãˆã°hgrcã«ã“ã†ã„ã†ã®ãŒæ›¸ã‹ã‚Œã¦ã„ã‚‹ãƒªãƒã‚¸ãƒˆãƒªã®å ´åˆ

```sh
[paths]
default = ssh://yomitan//home/hg/y15/e155730/OS/ex6.3
```

```sh
$hg-browse
```

ã¨ãƒªãƒã‚¸ãƒˆãƒªå†…ã§å®Ÿè¡Œã™ã‚‹ã¨ã€ [https://ie.u-ryukyu.ac.jp/hg/y15/index.cgi/home/hg/y15/e155730/OS/ex6.3] ã‚’è‡ªå‹•ã§openã—ã¦ãã‚Œã‚‹ãã‚“



---

ã¨ã„ã†ã‚ã‘ã§è‰²ã€…ãªä¾¿åˆ©ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«é›†ã§ã—ãŸã€‚å€‹äººçš„ã«ã¯ã ã„ãŸã„ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ä¸Šã§ç”Ÿæ´»ã—ã¦ã„ã‚‹äººé–“ãªã®ã§ã€ã“ã®ã‚ãŸã‚Šã®ãŠã‚‚ã—ã‚ãƒ„ãƒ¼ãƒ«ã‚’ã„ã‹ã«ä½¿ã†/ä½œã‚‹ã‹ã‚’è€ƒãˆã¦ã„ã¾ã™ã€‚
ã‚‚ã—çš†ã•ã‚“ã‚‚ã¡ã‚‡ã£ã¨ã‚·ã‚§ãƒ«ã‚„CUIã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ã‚ˆã†ã¨æ€ã£ãŸã‚‰ã€å‚è€ƒã«ã—ã¦ã‚‚ã‚‰ãˆã‚Œã°å¹¸ã„ã§ã™ã€‚

æ˜æ—¥ã¯id:sdr816:detailãã‚“ã§ã™
